@(field: play.api.data.Field, label: String, 
  uLocations: List[models.Location], 
  locations: List[models.Location],
  args: (Symbol,Any)*)

@import helper._ 
@import helper.twitterBootstrap._
@import mupiHelpers._
@import play.libs.Json

@allLocs = @{Html(Json.stringify(Json.toJson(locations)))}


<div class="row">
	<div class="span3">
	  <label for="@field.name">
	    @label
	  </label>
	  
	  @for( location <- uLocations ){
      <span id="@location.id" >@location.name</span>
      <button location="@location.id" id="removeLocation">x</button>
    }   
	
	  <input type="text" id="locationSelector" data-provide="typeahead" AUTOCOMPLETE="OFF" />
	  <button id="addLocation">+</button>
	  
	  
	</div>
</div>

<script>
    jQuery(function(){
    	 jQuery('#locationSelector').keypress(function(e) {
    	        if(e.which == 13) {
    	            jQuery(this).blur();
    	            registerLocation(@allLocs);
    	        }
    	    });
       jQuery('#addLocation').live('click', function(){registerLocation(@allLocs)});
       
       jQuery('#locationSelector').typeahead({
         property: "name",
         source: @allLocs,
         itemLabel: "name"
       });
       
       jQuery('#removeLocation').live('click', function(){
    	   removeLocation(jQuery(this).attr('location'));
    	 });
    })
 </script>